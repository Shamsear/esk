<!DOCTYPE html>
<html lang="en" class="js-loading">
<head>
    <!-- PWA support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3498db">
    <link rel="apple-touch-icon" href="/assets/images/logo11.webp">

    <!-- DNS prefetch and preconnect -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" media="print" onload="this.media='all'" crossorigin>
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap"></noscript>
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://assets.mixkit.co">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="icon" href="assets/images/logo11.webp" type="image/webp">
    <link rel="shortcut icon" href="assets/images/logo11.webp" type="image/webp">
    <link rel="apple-touch-icon" href="/assets/images/logo11.webp">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>R2G Player Data</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" media="print" onload="this.media='all'" crossorigin>
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"></noscript>
    <!-- Include Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Main page style */
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-image: url('assets/images/logo.webp');
            color: #e3e3e3;
            margin: 0;
            padding: 0;
            user-select: none; /* Standard property */
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* Internet Explorer/Edge */
            position: relative;
        }

        /* Background overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.85));
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -1;
            animation: slowZoom 60s infinite alternate;
        }

        @keyframes slowZoom {
            0% {
                transform: scale(1);
            }
            100% {
                transform: scale(1.1);
            }
        }

        /* Welcome screen styles */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #121212;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1050; /* Higher than modal z-index */
            color: #fff;
            text-align: center;
            font-size: 32px;
            flex-direction: column;
            animation: fadeIn 1s ease-in-out;
            transition: opacity 0.5s ease-out;
        }
        /* Welcome message styling */
        .welcome-message {
            font-size: 48px;
            font-weight: bold;
            color: #b0b0b0; /* Dark gray color for the welcome message */
            opacity: 0;
            animation: fadeIn 2s ease-in-out forwards, bounce 2s ease-in-out infinite;
        }
        @media screen and (max-width: 768px) {
            .welcome-message {
            font-size: 38px;
            font-weight: bold;
            color: #b0b0b0; /* Dark gray color for the welcome message */
            opacity: 0;
            animation: fadeIn 2s ease-in-out forwards, bounce 2s ease-in-out infinite;
        }
    }

        /* Dynamic subtext that rotates */
        .subtext {
            margin-top: 20px;
            font-size: 24px;
            color: #888; /* Light gray for the loading message */
            opacity: 0;
            animation: fadeIn 2.5s ease-in-out forwards;
        }

        /* Keyframes for fading in and background animation */
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        #content {
            display: none; /* Make sure it's hidden by default */
            opacity: 0;
            animation: fadeIn 1s ease-in-out forwards;
        }

        h1 {
            text-align: center;
            font-size: 24px;
            margin-top: 20px;
            color: #fff;
        }
        h2 {
            display: block;
            font-size: 1.5em;
            margin-block-start: 0.83em;
            margin-block-end: 0.83em;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
            font-weight: normal;
            unicode-bidi: isolate;
        }

        /* Search Container and Bar Styling */
        .search-container {
            display: flex;
            justify-content: center;
            padding: 15px;
            background: transparent;
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            box-sizing: border-box;
        }

        .search-wrapper {
            position: relative;
            width: 100%;
            max-width: 90%;
            margin: 0 auto;
        }

        .search-container input {
            width: 100%;
            padding: 14px 45px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            font-size: 15px;
            color: #fff;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }

        .search-container input:focus {
            outline: none;
            border-color: #4caf50;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.15);
        }

        .search-container input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 18px;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .search-container input:focus + .search-icon {
            color: #4caf50;
        }

        .search-clear {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 16px;
            cursor: pointer;
            background: none;
            border: none;
            padding: 4px;
            display: none;
            transition: all 0.2s ease;
        }

        .search-clear:hover {
            color: #fff;
        }

        .search-clear.visible {
            display: block;
        }

        /* Search Animation */
        @keyframes searchFocus {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .search-container input:focus {
            animation: searchFocus 0.3s ease;
        }

        /* Mobile Optimization */
        @media screen and (max-width: 768px) {
            .search-container {
                padding: 10px 15px;
                max-width: 100%;
            }

            .search-wrapper {
                max-width: 95%;
            }

            .search-container input {
                padding: 12px 40px;
                font-size: 14px;
            }

            .search-icon {
                left: 12px;
                font-size: 16px;
            }

            .search-clear {
                right: 12px;
            }
        }

        /* Player cards section */
        .content {
            display: flex;
            padding: 20px;
            gap: 20px;
            position: relative;
            z-index: 1;
        }
        .player-cards {
             /* Ensures padding does not cause overflow */
        }

        /* Player card container with fixed dimensions */
.player-card {
    width: 250px; /* Fixed width for player cards */
    height: auto; /* Fixed height for player cards */
    background-color: transparent;
    border: none;
    padding: 0;
    text-align: center;
    box-shadow: none;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: flex; /* Use flexbox to center content */
    flex-direction: column; /* Arrange content vertically */
    justify-content: center; /* Center vertically */
}
.player-card {
    width: 100%;
    box-sizing: border-box; /* Ensures that padding/margins don't cause overflow */
}

@media screen and (min-width: 768px) {
    .player-cards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        max-width: 70%;
        margin: 0 auto;
        padding: 10px;
        box-sizing: border-box;
    }
}

/* Adjust grid layout for larger screens */
@media screen and (max-width: 768px) {
    .player-cards {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        max-width: 100%;
        margin: 0 auto;
        padding: 10px;
        box-sizing: border-box;
    }
}

        .player-item:hover {
            transform: scale(1.05);
        }

        .player-card.selected {
            border: 2px solid #4caf50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.7);
            border-radius: 10px;
        }

        .player-card img {
            width: 100%;
            height: auto; /* Maintain aspect ratio */
            object-fit: cover;
            border-radius: 10px;
            display: block;
        }

        /* Filter section */
        .filters {
            flex: 1;
            background-color: rgba(40, 40, 40, 0.8);
            padding: 20px;
            border-radius: 10px;
            color: #fff;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .dropdown-option img {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        .filters h2 {
            font-size: 20px;
            margin-bottom: 15px;
            color: #fff;
        }

        .filters label {
            font-size: 16px;
            display: block;
            margin-bottom: 10px;
        }

        .filters select {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            background-color: #444;
            color: #fff;
            border: none;
        }

        /* Apply and Reset buttons */
        .filters .filter-buttons {
            display: flex;
            justify-content: space-between;
        }

        .filters button {
            padding: 10px 15px;
            font-size: 14px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .search-positions a.selected {
            background-color: #4caf50;
            color: white;
        }
                
        .apply-button {
            background-color: #4caf50;
            color: #fff;
        }

        .reset-button {
            background-color: #f44336;
            color: #fff;
        }

        /* Filter Button for Mobile/Tablets */
        .filter-btn {
            display: none;
            background: rgba(40, 40, 40, 0.9);
            color: #fff;
            border: none;
            padding: 12px 24px;
            font-size: 15px;
            border-radius: 25px;
            cursor: pointer;
            position: fixed;
            right: 20px;
            bottom: 20px; /* Changed from top: 50% to bottom: 20px */
            transform: none; /* Removed transform */
            z-index: 98;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn i {
            font-size: 14px;
            transition: transform 0.3s ease;
        }

        .filter-btn:hover {
            background: rgba(50, 50, 50, 0.95);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }

        .filter-btn:hover i {
            transform: rotate(180deg);
        }

        /* Mobile Optimization for Filter Button */
        @media screen and (max-width: 768px) {
            .filter-btn {
                padding: 10px 20px;
                font-size: 14px;
                right: 15px;
                bottom: 15px;
                display: block; /* Always show on mobile */
            }
        }

        /* The Modal (background) */
.modal {
    display: none;
    position: fixed;
    z-index: 1000; /* Increased z-index */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    overflow: auto;
}

/* Modal Content */
.modal-content {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #0a0e14 0%, #080d15 100%);
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.8);
    width: 90vw;
    max-width: 600px;
    max-height: 85vh;
    overflow-y: auto;
    box-sizing: border-box;
    animation: modalFadeIn 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    z-index: 1001;
    margin: 0 auto;
    border: 1px solid rgba(40, 80, 150, 0.3);
}
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: translate(-50%, -48%);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

/* Modal Close Button */
.modal-content .close {
    position: absolute;
    right: 15px;
    top: 15px;
    color: rgba(255, 255, 255, 0.6);
    font-size: 24px;
    font-weight: bold;
    width: 32px;
    height: 32px;
    background: rgba(40, 50, 70, 0.4);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 10;
}

.modal-content .close:hover {
    background: rgba(60, 70, 90, 0.6);
    transform: rotate(90deg);
}

/* Player Name Header Styling */
.modal-header {
    position: relative;
    text-align: center;
    margin: 0 0 20px 0;
    padding: 0;
}

.modal-content h2 {
    font-size: 28px;
    color: #fff;
    text-align: center;
    font-weight: 700;
    margin: 0;
    padding: 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    line-height: 1.2;
}

@media screen and (max-width: 480px) {
    .modal-content h2 {
        font-size: 24px;
    }
}

.modal-content img {
    width: 100%;
    max-width: 300px;
    height: auto;
    border-radius: 12px;
    margin: 0 auto 20px;
    display: block;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* Player Info Grid */
.player-info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 25px;
    background: rgba(20, 25, 35, 0.5);
    padding: 15px;
    border-radius: 10px;
}

.info-item {
    display: flex;
    flex-direction: column;
}

.info-label {
    font-size: 12px;
    color: #6e7888;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.info-value {
    font-size: 16px;
    color: #fff;
    font-weight: 500;
}

/* Stats Table Styling */
#playerStatsTable {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin-top: 20px;
    background: rgba(20, 25, 35, 0.5);
    border-radius: 10px;
    overflow: hidden;
}

#playerStatsTable th {
    background-color: rgba(15, 20, 30, 0.7);
    color: #a0a9b8;
    font-weight: 600;
    padding: 12px;
    text-align: left;
    font-size: 14px;
}

#playerStatsTable td {
    padding: 12px;
    color: #e3e3e3;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 14px;
}

#playerStatsTable tr:last-child td {
    border-bottom: none;
}

#playerStatsTable tr:hover td {
    background-color: rgba(255, 255, 255, 0.05);
}

/* Mobile Optimizations */
@media screen and (max-width: 480px) {
    .modal-content {
        padding: 15px;
        width: 95vw;
    }

    .modal-content h2 {
        font-size: 20px;
    }

    .player-info-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    #playerStatsTable th,
    #playerStatsTable td {
        padding: 10px;
        font-size: 13px;
    }

    .info-label {
        font-size: 11px;
    }

    .info-value {
        font-size: 14px;
    }
}

/* Scrollbar Styling */
.modal-content::-webkit-scrollbar {
    width: 8px;
}

.modal-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
}

.modal-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

.modal-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

        .modal-content h2 {
            margin-top: 0;
            font-size: 18px;
            color: #fff;
            text-align: center;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
        }

        .filter-group {
            margin-bottom: 15px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .filter-group select {
            width: 100%;
            padding: 8px;
            background: #333;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 14px;
        }

        .filter-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .apply-button {
            background-color: #bada55;
            color: #000;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 48%;
        }

        .reset-button {
            background-color: #444;
            color: #e3e3e3;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 48%;
        }

        .apply-button:hover {
            background-color: #a5d84b;
        }

        .reset-button:hover {
            background-color: #555;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); }
            to { transform: translateY(0); }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
        }

        .modal h2 {
            margin-top: 0;
        }

        /* Responsive Design */
        @media screen and (max-width: 768px) {
            /* Hide filters and show the filter button on smaller screens */
            .filters {
                display: none;
            }

            .filter-btn {
                display: block;
            }
        }

        /* Improved Button UI */
        button:hover {
            opacity: 0.9;
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            gap: 10px;
        }
        
        .pagination button {
            background-color: #444;
            color: #e3e3e3;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .pagination button:hover {
            background-color: #555;
        }
        
        #page-info {
            color: #e3e3e3;
        }
        .search-positions {
            justify-content: center;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }
        .search-positions.b {
            justify-content: center;
            display: block;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }
        .search-positions-header {
            flex: 0 0 100%;
            margin-bottom: 5px;
        }
        .search-positions a {
            flex: 0 0 85px;
        }
        @media screen and (max-width: 768px) {
        .search-positions a {
            flex: 0 0 100px;
        }
    }
        .search-button {
            display: block;
            background: #333a3c;
            text-align: center;
            color: rgba(255, 255, 255, 0.87);
            border: 1px solid #333a3c;
            border-radius: 6px;
            font-size: 14px;
            padding-top: 5px;
            padding-bottom: 5px;
        }

        .search-button.b {
            display: block;
            background: #333a3c;
            text-align: center;
            color: rgba(255, 255, 255, 0.87);
            border: 1px solid #333a3c;
            border-radius: 6px;
            font-size: 14px;
            padding-top: 5px;
            padding-bottom: 5px;
        }
        .filters hr {
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            margin-bottom: 20px;
            margin-top: 0%;
        }
        .logo-search-container {
            display: flex;
            flex-direction: column; /* Stack items vertically */
            align-items: center;
            margin: auto;
        }
        .logo {
            display: flex;
            justify-content: center;
        }
        
        .logo-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: auto; /* Adds space between logo and search bar */
        }
        .custom-dropdown {
            position: relative;
            display: inline-block;
            width: 96%;
            cursor: pointer;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 20px;
            background-color: #444;
            color: #fff;
        }
        
        .selected-option {
            display: flex;
            align-items: center;
            justify-content: left; /* Space between text and icon */
            font-size: 16px;
            padding-right: 30px; /* Space for the icon */
            position: relative;
        }
        
        .dropdown-icon {
            position: absolute;
            right: 10px; /* Position the icon to the right */
            font-size: 14px;
            color: #fff;
            top:10px;
        }
        
        
        
        .dropdown-options {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: #282828;
            border: 1px solid #ccc;
            z-index: 1000;
            border-radius: 5px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .dropdown-item {
            padding: 10px;
            display: flex;
            align-items: center;
            cursor: pointer;
            color: #fff;
        }
        
        .dropdown-item img {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            object-fit:contain;
        }
        @media screen and (max-width: 768px) {
            .dropdown-item img {
            width: 20px !important;
            height: 20px !important;
            margin-right: 5px !important;
            margin-left: 20px;
            margin: 0px !important;
            object-fit: contain;
        }
        .selected-option img{
            width: 20% !important;
            margin-left: 10px;
            margin-right: 10px;
            object-fit:contain;
        }
            .selected-option {
            display: flex;
            justify-content: left; /* Space between text and icon */
            font-size: 16px;
            padding-right: 30px; /* Space for the icon */
            position: relative;
            object-fit: contain;  
        }
    }
        
        .dropdown-item:hover {
            background-color: #555;
        }
        .selected-option img{
            width: 10%;
            object-fit:contain;
        }
        #playerStatsTable {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        #playerStatsTable th, #playerStatsTable td {
            border: 1px solid white;
            padding: 8px;
            text-align: center;
        }
        
        #playerStatsTable th {
            background-color: #1a1a1a;
            font-weight: bold;
        }
        
        #playerStatsTable tr:nth-child(even) {
            background-color: #1a1a1a;
        }
        
        #playerStatsTable tr:hover {
            background-color: #1a1a1a;
        }
        
        /* Admin link styling */
        .admin-link {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 99; /* Lower z-index than modal */
        }
        
        .admin-link a {
            background-color: #282828;
            color: #e3e3e3;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .admin-link a:hover {
            background-color: #4caf50;
            transform: scale(1.1);
        }
        
        .admin-link i {
            font-size: 20px;
        }

        /* Back link styling */
        .back-link {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 99; /* Lower z-index than modal */
        }
        
        .back-link a {
            background-color: #282828;
            color: #e3e3e3;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .back-link a:hover {
            background-color: #3498db;
            transform: scale(1.1);
        }
        
        .back-link i {
            font-size: 20px;
        }

        .player-card img {
            width: 100%;
            height: auto; /* Maintain aspect ratio */
            object-fit: cover;
            border-radius: 10px;
            display: block;
        }
        
        .stats-container {
            margin-top: 25px;
            background: rgba(20, 25, 35, 0.4);
            border-radius: 12px;
            padding: 20px;
        }

        .stats-header {
            color: #a0a9b8;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            padding-left: 8px;
        }

        .stats-header i {
            color: #4caf50;
            font-size: 18px;
        }

        #playerStatsTable {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
            background: transparent;
            margin-top: -8px;
        }

        #playerStatsTable thead tr {
            background: transparent;
        }

        #playerStatsTable th {
            background: transparent;
            color: #666;
            font-weight: 500;
            padding: 8px 16px;
            text-align: left;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: none;
        }

        #playerStatsTable tbody tr {
            background: rgba(20, 25, 35, 0.4);
            transition: all 0.2s ease;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        #playerStatsTable td {
            padding: 16px;
            color: #fff;
            font-size: 14px;
            border: none;
            position: relative;
        }

        #playerStatsTable td:first-child {
            border-radius: 8px 0 0 8px;
        }

        #playerStatsTable td:last-child {
            border-radius: 0 8px 8px 0;
        }

        #playerStatsTable tbody tr:hover {
            background: rgba(30, 40, 55, 0.6);
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .season-badge {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            display: inline-block;
        }

        .value-cell {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #4caf50 !important;
            font-weight: 500;
        }

        .value-trend {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .trend-up {
            color: #4caf50;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .trend-down {
            color: #f44336;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        @media screen and (max-width: 480px) {
            .stats-container {
                padding: 15px;
                margin-top: 20px;
            }

            .stats-header {
                font-size: 14px;
                margin-bottom: 15px;
            }

            #playerStatsTable {
                border-spacing: 0 6px;
            }

            #playerStatsTable th {
                padding: 8px 12px;
                font-size: 11px;
            }

            #playerStatsTable td {
                padding: 12px;
                font-size: 13px;
            }

            .season-badge {
                font-size: 12px;
                padding: 4px 8px;
            }
        }
        
    </style>

</head>
<body>
    <!-- Admin link -->
    <div class="admin-link">
        <a href="admin-login.html" title="Admin Panel">
            <i class="fas fa-user-shield"></i>
        </a>
    </div>
    
    <!-- Back to Career Mode button -->
    <div class="back-link">
        <a href="career-mode.html" title="Back to Career Mode">
            <i class="fas fa-arrow-left"></i>
        </a>
    </div>
    
    <div id="loading">
        <div class="background-animation"></div> <!-- Animated background -->

        <div class="welcome-message" id="dynamic-message">Welcome to R2G Player Data</div>
        <div class="subtext" id="subtext">Loading, please wait...</div>
    </div>

    <!-- Title -->
    <header class="header">
        <div class="logo-search-container">
            <div class="logo">
                <!-- Add your logo here -->
                <img src="/assets/images/logo11.webp" alt="Logo" class="logo-img" width="40" height="40">
                <h1>R2G Player Data</h1>
            </div>

    </div>
<!-- Search bar -->
<div class="search-container">
    <div class="search-wrapper">
        <input type="text" id="search-bar" placeholder="Search players...">
        <i class="fas fa-search search-icon"></i>
        <button type="button" class="search-clear" id="search-clear">
            <i class="fas fa-times"></i>
        </button>
    </div>
</div>


    <!-- Filter Button for Mobile/Tablets -->
    <button class="filter-btn" onclick="openFilterModal()">
        Filters <i class="fas fa-filter"></i>
    </button>
    <!-- Main content -->
    <div class="content">    
        <!-- Player cards -->
        <div class="player-cards" id="player-cards">
            <!-- Player cards will be dynamically loaded here -->
        </div>

        <!-- Filters Section -->
        <div class="filters">
            <h2>Filters</h2>
            <!-- Custom Dropdown for Star Filter -->
    <label for="star">Card Type:</label>
    <div class="custom-dropdown" id="starDropdown">
        <div class="selected-option" data-value="all">All</div>
                <i class="dropdown-icon fa fa-chevron-down"></i> 
                <div class="dropdown-options">
                    <div class="dropdown-item" data-value="all">All</div>
                    <div class="dropdown-item" data-value="3-star-standard">
                        <img src="/assets/images/players/modal/4STAR.webp" alt="3 Star Standard" width="300" height="200" > 3 Star Standard
                    </div>
                    <div class="dropdown-item" data-value="4-star-standard">
                        <img src="/assets/images/players/modal/4STAR.webp" alt="4 Star Standard" width="300" height="200" > 4 Star Standard
                    </div>
                    <div class="dropdown-item" data-value="5-star-standard">
                        <img src="/assets/images/players/modal/5STAR.webp" alt="5 Star Standard" width="300" height="200" > 5 Star Standard
                    </div>
                    <div class="dropdown-item" data-value="4-star-legend">
                        <img src="/assets/images/players/modal/3STARLEGEND.webp" alt="4 Star Legend" width="300" height="200" > 4 Star Legend
                    </div>
                    <div class="dropdown-item" data-value="5-star-legend">
                        <img src="/assets/images/players/modal/5STARLEGEND.webp" alt="5 Star Legend" width="300" height="200" > 5 Star Legend
                    </div>
                </div>
    </div>
            <label for="club">Club:</label>
            <div class="custom-dropdown" id="clubDropdown">
                <div class="selected-option">All</div>
                <i class="dropdown-icon fa fa-chevron-down"></i>
                <div class="dropdown-options">
                    <div class="dropdown-item" data-value="ALL">All</div>
                    <div class="dropdown-item" data-value="FREE AGENT">
                        <img src="/assets/images/players/club/freeagent.WEBP" alt="" width="300" height="200" > FREE AGENT
                    </div>                    
                    <div class="dropdown-item" data-value="AC MILAN">
                        <img src="/assets/images/players/club/AC Milan.webp" alt="" width="300" height="200" > AC MILAN
                    </div>
                    <div class="dropdown-item" data-value="AFC AJAX">
                        <img src="/assets/images/players/club/AFC Ajax.webp" alt="" width="300" height="200" > AFC AJAX
                    </div>
                    <div class="dropdown-item" data-value="AL-NASSR FC">
                        <img src="/assets/images/players/club/Al-Nassr FC.webp" alt="" width="300" height="200" > AL-NASSR FC
                    </div>
                    <div class="dropdown-item" data-value="ARSENAL FC">
                        <img src="/assets/images/players/club/Arsenal FC.webp" alt="" width="300" height="200" > ARSENAL FC
                    </div>
                    <div class="dropdown-item" data-value="ATALANTA BC">
                        <img src="/assets/images/players/club/Atalanta BC.webp" alt="" width="300" height="200" > ATALANTA BC
                    </div>
                    <div class="dropdown-item" data-value="ASTON VILLA FC">
                        <img src="/assets/images/players/club/Aston Villa FC.webp" alt="" width="300" height="200" > ASTON VILLA FC
                    </div>
                    <div class="dropdown-item" data-value="ATLETICO DE MADRID">
                        <img src="/assets/images/players/club/Atletico de Madrid.webp" alt="" width="300" height="200" > ATLETICO DE MADRID
                    </div>
                    <div class="dropdown-item" data-value="BAYER LEVERKUSEN">
                        <img src="/assets/images/players/club/Bayer Leverkusen.webp" alt="" width="300" height="200" > BAYER LEVERKUSEN
                    </div>
                    <div class="dropdown-item" data-value="BORUSSIA DORTMUND">
                        <img src="/assets/images/players/club/Borussia Dortmund.webp" alt="" width="300" height="200" > BORUSSIA DORTMUND
                    </div>
                    <div class="dropdown-item" data-value="CHELSEA FC">
                        <img src="/assets/images/players/club/Chelsea FC.webp" alt="" width="300" height="200" > CHELSEA FC
                    </div>
                    <div class="dropdown-item" data-value="FC BARCELONA">
                        <img src="/assets/images/players/club/FC Barcelona.webp" alt="" width="300" height="200" > FC BARCELONA
                    </div>
                    <div class="dropdown-item" data-value="FC BAYERN MUNICH">
                        <img src="/assets/images/players/club/FC Bayern Munich.webp" alt="" width="300" height="200" > FC BAYERN MUNICH
                    </div>
                    <div class="dropdown-item" data-value="FSV MAINZ 05">
                        <img src="/assets/images/players/club/FSV MAINZ 05.webp" alt="" width="300" height="200" > FSV MAINZ 05
                    </div>
                    <div class="dropdown-item" data-value="INTER MIAMI">
                        <img src="/assets/images/players/club/Inter Miami.webp" alt="" width="300" height="200" > INTER MIAMI
                    </div>
                    <div class="dropdown-item" data-value="INTER MILAN">
                        <img src="/assets/images/players/club/Inter Milan.webp" alt="" width="300" height="200" > INTER MILAN
                    </div>
                    <div class="dropdown-item" data-value="LIVERPOOL FC">
                        <img src="/assets/images/players/club/Liverpool FC.webp" alt="" width="300" height="200" > LIVERPOOL FC
                    </div>
                    <div class="dropdown-item" data-value="LOSC LILLE">
                        <img src="/assets/images/players/club/LOSC Lille.webp" alt="" width="300" height="200" > LOSC LILLE
                    </div>
                    <div class="dropdown-item" data-value="MANCHESTER CITY">
                        <img src="/assets/images/players/club/Manchester City FC.webp" alt="" width="300" height="200" > MANCHESTER CITY
                    </div>
                    <div class="dropdown-item" data-value="MANCHESTER UNITED">
                        <img src="/assets/images/players/club/Manchester United FC.webp" alt="" width="300" height="200" > MANCHESTER UNITED
                    </div>
                    
                    <div class="dropdown-item" data-value="MOHUN BAGAN AC">
                        <img src="/assets/images/players/club/Mohun Bagan AC.webp" alt="" width="300" height="200" > MOHUN BAGAN AC
                    </div>
                    <div class="dropdown-item" data-value="MUMBAI CITY FC">
                        <img src="/assets/images/players/club/Mumbai City FC.webp" alt="" width="300" height="200" > MUMBAI CITY FC
                    </div>
                    <div class="dropdown-item" data-value="NEWCASTLE UNITED FC">
                        <img src="/assets/images/players/club/Newcastle United FC.webp" alt="" width="300" height="200" > NEWCASTLE UNITED FC
                    </div>
                    <div class="dropdown-item" data-value="NOTTINGHAM FOREST FC">
                        <img src="/assets/images/players/club/Nottingham Forest FC.webp" alt="" width="300" height="200" > NOTTINGHAM FOREST FC
                    </div>
                    <div class="dropdown-item" data-value="PARIS SAINT-GERMAIN FC">
                        <img src="/assets/images/players/club/Paris Saint-Germain FC.webp" alt="" width="300" height="200" > PARIS SAINT-GERMAIN FC
                    </div>
                    <div class="dropdown-item" data-value="RANGERS FC">
                        <img src="/assets/images/players/club/Rangers FC.webp" alt="" width="300" height="200" > RANGERS FC
                    </div>
                    <div class="dropdown-item" data-value="RAYONG FC">
                        <img src="/assets/images/players/club/Rayong FC.webp" alt="" width="300" height="200" > RAYONG FC
                    </div>
                    <div class="dropdown-item" data-value="REAL MADRID CF">
                        <img src="/assets/images/players/club/Real Madrid CF.webp" alt="" width="300" height="200" > REAL MADRID CF
                    </div>
                    <div class="dropdown-item" data-value="SANTOS FC">
                        <img src="/assets/images/players/club/Santos FC.webp" alt="" width="300" height="200" > SANTOS FC
                    </div>
                    <div class="dropdown-item" data-value="SL BENFICA">
                        <img src="/assets/images/players/club/SL Benfica.webp" alt="" width="300" height="200" > SL BENFICA
                    </div>
                    <div class="dropdown-item" data-value="SPORTING CP">
                        <img src="/assets/images/players/club/Sporting CP.webp" alt="" width="300" height="200" > SPORTING CP
                    </div>
                    <div class="dropdown-item" data-value="SS LAZIO">
                        <img src="/assets/images/players/club/SS Lazio.webp" alt="" width="300" height="200" > SS LAZIO
                    </div>
                    <div class="dropdown-item" data-value="TOTTENHAM HOTSPUR FC">
                        <img src="/assets/images/players/club/Tottenham Hotspur FC.webp" alt="" width="300" height="200" > TOTTENHAM HOTSPUR FC
                    </div>
                    <div class="dropdown-item" data-value="VFL WOLFSBURG">
                        <img src="/assets/images/players/club/VfL Wolfsburg.webp" alt="" width="300" height="200" > VFL WOLFSBURG
                    </div>
                    <div class="dropdown-item" data-value="WOLVES">
                        <img src="/assets/images/players/club/Wolves.webp" alt="" width="300" height="200" > WOLVES
                    </div>
                </div>
            </div>            
            <hr>
            <div class="search-positions">
                <div class="search-positions-header">
                Position:
               </div>
            <a href="Javascript:;" class="search-button.b" data-btn-type="search-positions.b" data-btn-var=""></a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="gk">GK</a>
            <a href="Javascript:;" class="search-button.b" data-btn-type="search-positions" data-btn-var=""></a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="lb">LB</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="cb">CB</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="rb">RB</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="cm">CM</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="am">AM</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="dm">DM</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="lw">LW</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="st">ST</a>
            <a href="Javascript:;" class="search-button" data-btn-type="search-positions" data-btn-var="rw">RW</a>
            </div>
            <div class="filter-buttons">
                <button class="apply-button" onclick="filterPlayers()">Apply</button>
                <button class="reset-button" onclick="resetFilters()">Reset</button>
            </div>
            
        </div>
    </div>
    
    <div id="playerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <h2 id="modalPlayerName">Player Name</h2>
            </div>
            <img id="modalPlayerPhoto" src="" alt="Player Photo">
            
            <div class="player-info-grid">
                <div class="info-item">
                    <span class="info-label">Club</span>
                    <span class="info-value" id="modalPlayerClub"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Star Rating</span>
                    <span class="info-value" id="modalPlayerLevel"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Position</span>
                    <span class="info-value" id="modalPlayerPosition"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Value</span>
                    <span class="info-value"><span id="modalPlayerValue"></span> RC</span>
                </div>
            </div>

            <div class="stats-container">
                <div class="stats-header">
                    <i class="fas fa-chart-line"></i>
                    Player History
                </div>
                <table id="playerStatsTable">
                    <thead>
                        <tr>
                            <th>Season</th>
                            <th>Team</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="modalPlayerDetails">
                        <!-- Dynamic rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    


<!-- Modal for Filters (on mobile/tablets) -->
<div id="filterModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeFilterModal()">&times;</span>
        <h2>Search Filters</h2>

        <!-- Custom Dropdown for Star Filter in Modal -->
        <div class="filter-group">
            <label for="modal-star">Card Type:</label>
            <div class="custom-dropdown" id="modalStarDropdown">
                <div class="selected-option" data-value="all">All</div>
                <i class="dropdown-icon fa fa-chevron-down"></i> 
                <div class="dropdown-options">
                    <div class="dropdown-item" data-value="all">All</div>
                    <div class="dropdown-item" data-value="3-star-standard">
                        <img src="/assets/images/players/modal/4STAR.webp" alt="3 Star Standard" width="300" height="200" > 3 Star Standard
                    </div>
                    <div class="dropdown-item" data-value="4-star-standard">
                        <img src="/assets/images/players/modal/4STAR.webp" alt="4 Star Standard" width="300" height="200" > 4 Star Standard
                    </div>
                    <div class="dropdown-item" data-value="5-star-standard">
                        <img src="/assets/images/players/modal/5STAR.webp" alt="5 Star Standard" width="300" height="200" > 5 Star Standard
                    </div>
                    <div class="dropdown-item" data-value="4-star-legend">
                        <img src="/assets/images/players/modal/3STARLEGEND.webp" alt="4 Star Legend" width="300" height="200" > 4 Star Legend
                    </div>
                    <div class="dropdown-item" data-value="5-star-legend">
                        <img src="/assets/images/players/modal/5STARLEGEND.webp" alt="5 Star Legend" width="300" height="200" > 5 Star Legend
                    </div>
                </div>
            </div>

            <!-- Custom Dropdown for Club Filter in Modal -->
            <label for="modal-club">Club:</label>
            <div class="custom-dropdown" id="modalClubDropdown">
                <div class="selected-option">All</div>
                <i class="dropdown-icon fa fa-chevron-down"></i>
                <div class="dropdown-options">
                    <div class="dropdown-item" data-value="ALL">All</div>
                    <div class="dropdown-item" data-value="FREE AGENT">
                        <img src="/assets/images/players/club/freeagent.WEBP" alt="" width="300" height="200" > FREE AGENT
                    </div>                    
                    <div class="dropdown-item" data-value="AC MILAN">
                        <img src="/assets/images/players/club/AC Milan.webp" alt="" width="300" height="200" > AC MILAN
                    </div>
                    <div class="dropdown-item" data-value="AFC AJAX">
                        <img src="/assets/images/players/club/AFC Ajax.webp" alt="" width="300" height="200" > AFC AJAX
                    </div>
                    <div class="dropdown-item" data-value="AL-NASSR FC">
                        <img src="/assets/images/players/club/Al-Nassr FC.webp" alt="" width="300" height="200" > AL-NASSR FC
                    </div>
                    <div class="dropdown-item" data-value="ARSENAL FC">
                        <img src="/assets/images/players/club/Arsenal FC.webp" alt="" width="300" height="200" > ARSENAL FC
                    </div>
                    <div class="dropdown-item" data-value="ATALANTA BC">
                        <img src="/assets/images/players/club/Atalanta BC.webp" alt="" width="300" height="200" > ATALANTA BC
                    </div>
                    <div class="dropdown-item" data-value="ASTON VILLA FC">
                        <img src="/assets/images/players/club/Aston Villa FC.webp" alt="" width="300" height="200" > ASTON VILLA FC
                    </div>
                    <div class="dropdown-item" data-value="ATLETICO DE MADRID">
                        <img src="/assets/images/players/club/Atletico de Madrid.webp" alt="" width="300" height="200" > ATLETICO DE MADRID
                    </div>
                    <div class="dropdown-item" data-value="BAYER LEVERKUSEN">
                        <img src="/assets/images/players/club/Bayer Leverkusen.webp" alt="" width="300" height="200" > BAYER LEVERKUSEN
                    </div>
                    <div class="dropdown-item" data-value="BORUSSIA DORTMUND">
                        <img src="/assets/images/players/club/Borussia Dortmund.webp" alt="" width="300" height="200" > BORUSSIA DORTMUND
                    </div>
                    <div class="dropdown-item" data-value="CHELSEA FC">
                        <img src="/assets/images/players/club/Chelsea FC.webp" alt="" width="300" height="200" > CHELSEA FC
                    </div>
                    <div class="dropdown-item" data-value="FC BARCELONA">
                        <img src="/assets/images/players/club/FC Barcelona.webp" alt="" width="300" height="200" > FC BARCELONA
                    </div>
                    <div class="dropdown-item" data-value="FC BAYERN MUNICH">
                        <img src="/assets/images/players/club/FC Bayern Munich.webp" alt="" width="300" height="200" > FC BAYERN MUNICH
                    </div>
                    <div class="dropdown-item" data-value="FSV MAINZ 05">
                        <img src="/assets/images/players/club/FSV MAINZ 05.webp" alt="" width="300" height="200" > FSV MAINZ 05
                    </div>
                    <div class="dropdown-item" data-value="INTER MIAMI">
                        <img src="/assets/images/players/club/Inter Miami.webp" alt="" width="300" height="200" > INTER MIAMI
                    </div>
                    <div class="dropdown-item" data-value="INTER MILAN">
                        <img src="/assets/images/players/club/Inter Milan.webp" alt="" width="300" height="200" > INTER MILAN
                    </div>
                    <div class="dropdown-item" data-value="LIVERPOOL FC">
                        <img src="/assets/images/players/club/Liverpool FC.webp" alt="" width="300" height="200" > LIVERPOOL FC
                    </div>
                    <div class="dropdown-item" data-value="LOSC LILLE">
                        <img src="/assets/images/players/club/LOSC Lille.webp" alt="" width="300" height="200" > LOSC LILLE
                    </div>
                    <div class="dropdown-item" data-value="MANCHESTER CITY">
                        <img src="/assets/images/players/club/Manchester City FC.webp" alt="" width="300" height="200" > MANCHESTER CITY
                    </div>
                    <div class="dropdown-item" data-value="MANCHESTER UNITED">
                        <img src="/assets/images/players/club/Manchester United FC.webp" alt="" width="300" height="200" > MANCHESTER UNITED
                    </div>
                    
                    <div class="dropdown-item" data-value="MOHUN BAGAN AC">
                        <img src="/assets/images/players/club/Mohun Bagan AC.webp" alt="" width="300" height="200" > MOHUN BAGAN AC
                    </div>
                    <div class="dropdown-item" data-value="MUMBAI CITY FC">
                        <img src="/assets/images/players/club/Mumbai City FC.webp" alt="" width="300" height="200" > MUMBAI CITY FC
                    </div>
                    <div class="dropdown-item" data-value="NEWCASTLE UNITED FC">
                        <img src="/assets/images/players/club/Newcastle United FC.webp" alt="" width="300" height="200" > NEWCASTLE UNITED FC
                    </div>
                    <div class="dropdown-item" data-value="NOTTINGHAM FOREST FC">
                        <img src="/assets/images/players/club/Nottingham Forest FC.webp" alt="" width="300" height="200" > NOTTINGHAM FOREST FC
                    </div>
                    <div class="dropdown-item" data-value="PARIS SAINT-GERMAIN FC">
                        <img src="/assets/images/players/club/Paris Saint-Germain FC.webp" alt="" width="300" height="200" > PARIS SAINT-GERMAIN FC
                    </div>
                    <div class="dropdown-item" data-value="RANGERS FC">
                        <img src="/assets/images/players/club/Rangers FC.webp" alt="" width="300" height="200" > RANGERS FC
                    </div>
                    <div class="dropdown-item" data-value="RAYONG FC">
                        <img src="/assets/images/players/club/Rayong FC.webp" alt="" width="300" height="200" > RAYONG FC
                    </div>
                    <div class="dropdown-item" data-value="REAL MADRID CF">
                        <img src="/assets/images/players/club/Real Madrid CF.webp" alt="" width="300" height="200" > REAL MADRID CF
                    </div>
                    <div class="dropdown-item" data-value="SANTOS FC">
                        <img src="/assets/images/players/club/Santos FC.webp" alt="" width="300" height="200" > SANTOS FC
                    </div>
                    <div class="dropdown-item" data-value="SL BENFICA">
                        <img src="/assets/images/players/club/SL Benfica.webp" alt="" width="300" height="200" > SL BENFICA
                    </div>
                    <div class="dropdown-item" data-value="SPORTING CP">
                        <img src="/assets/images/players/club/Sporting CP.webp" alt="" width="300" height="200" > SPORTING CP
                    </div>
                    <div class="dropdown-item" data-value="SS LAZIO">
                        <img src="/assets/images/players/club/SS Lazio.webp" alt="" width="300" height="200" > SS LAZIO
                    </div>
                    <div class="dropdown-item" data-value="TOTTENHAM HOTSPUR FC">
                        <img src="/assets/images/players/club/Tottenham Hotspur FC.webp" alt="" width="300" height="200" > TOTTENHAM HOTSPUR FC
                    </div>
                    <div class="dropdown-item" data-value="VFL WOLFSBURG">
                        <img src="/assets/images/players/club/VfL Wolfsburg.webp" alt="" width="300" height="200" > VFL WOLFSBURG
                    </div>
                    <div class="dropdown-item" data-value="WOLVES">
                        <img src="/assets/images/players/club/Wolves.webp" alt="" width="300" height="200" > WOLVES
                    </div>
                </div>
            </div>            
        </div>

            <div class="search-positions">
            <div class="search-positions-header">
            Position
            </div>
            <a href="Javascript:;" class="search-button.b" data-btn-type="search-positions.b" data-btn-var=""></a>
            <a href="Javascript:;" class="search-button gk" data-btn-type="search-positions" data-btn-var="gk">GK</a>
            <a href="Javascript:;" class="search-button.b" data-btn-type="search-positions" data-btn-var=""></a>
            <a href="Javascript:;" class="search-button lb" data-btn-type="search-positions" data-btn-var="lb">LB</a>
            <a href="Javascript:;" class="search-button cb" data-btn-type="search-positions" data-btn-var="cb">CB</a>
            <a href="Javascript:;" class="search-button rb" data-btn-type="search-positions" data-btn-var="rb">RB</a>
            <a href="Javascript:;" class="search-button cm" data-btn-type="search-positions" data-btn-var="cm">CM</a>
            <a href="Javascript:;" class="search-button am" data-btn-type="search-positions" data-btn-var="am">AM</a>
            <a href="Javascript:;" class="search-button dm" data-btn-type="search-positions" data-btn-var="dm">DM</a>
            <a href="Javascript:;" class="search-button lw" data-btn-type="search-positions" data-btn-var="lw">LW</a>
            <a href="Javascript:;" class="search-button st" data-btn-type="search-positions" data-btn-var="st">ST</a>
            <a href="Javascript:;" class="search-button rw" data-btn-type="search-positions" data-btn-var="rw">RW</a>
            </div>
            
        <div class="filter-buttons">
            <button class="apply-button" onclick="applyModalFilters()">Apply Filters</button>
            <button class="reset-button" onclick="resetModalFilters()">Reset Filters</button>
        </div>
    </div>
</div>
<div class="pagination">
    <button class="prev-button">Previous</button>
    <span id="page-info">Page 1</span>
    <button class="next-button">Next</button>
</div>

    <script>

window.onload = function() {
    const messages = [
        "Welcome to R2G Player Data",
        "Loading Data...",
        "Ready to Explore Players?"
    ];
    let messageIndex = 0;

    // Global variables for selections
    window.selectedPositions = [];
    window.modalSelectedPositions = [];

    // Fetch players data from JSON file
    fetchPlayersData();

    // Cycle through messages every 1.5 seconds
    const messageInterval = setInterval(function() {
        messageIndex++;
        if (messageIndex < messages.length) {
            document.getElementById("dynamic-message").textContent = messages[messageIndex];
        } else {
            clearInterval(messageInterval); // Stop the interval once all messages have been shown
        }
    }, 1500);

    // Hide welcome screen after 4.5 seconds
    setTimeout(function() {
        const loadingElement = document.getElementById('loading');
        if (loadingElement) {
            loadingElement.style.opacity = '0';
            setTimeout(() => {
                loadingElement.style.display = 'none';
                document.body.style.removeProperty('overflow');
            }, 500);
        }
    }, 4500);
    
    // Block scrolling while welcome screen is visible
    document.body.style.overflow = 'hidden';
    
    // Initialize playerState if it doesn't exist yet
    if (!window.playerState) {
        window.playerState = {
            allPlayers: [],
            filteredPlayers: [],
            currentPage: 1,
            itemsPerPage: 24,
            totalPages: 1,
            filters: {
                searchTerm: '',
                star: 'all',
                club: 'ALL',
                position: []
            }
        };
    }
    
    resetFilters();
    resetModalFilters(); // Reset the filters when the page loads
    
    // Rest of your initialization code
};

// Function to fetch and load player data from the JSON file
async function fetchPlayersData() {
    try {
        // Show loading indicator with progress updates
        const loadingElement = document.getElementById('loading');
        const subtextElement = document.getElementById('subtext');
        if (subtextElement) {
            subtextElement.textContent = 'Fetching player data...';
        }
        
        // Fetch the data with a timeout to handle very large files
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout
        
        const response = await fetch('players.json', {
            signal: controller.signal
        });
        clearTimeout(timeoutId);
        
        if (!response.ok) {
            throw new Error('Failed to load player data');
        }
        
        if (subtextElement) {
            subtextElement.textContent = 'Processing player data...';
        }
        
        // Use streaming approach for large JSON files
        const reader = response.body.getReader();
        const decoder = new TextDecoder();
        let chunks = '';
        
        // Process the data in chunks
        while(true) {
            const {value, done} = await reader.read();
            if (done) break;
            chunks += decoder.decode(value, {stream: true});
        }
        
        const players = JSON.parse(chunks);
        if (subtextElement) {
            subtextElement.textContent = 'Preparing display...';
        }
        
        // Initialize pagination state
        window.playerState = {
            allPlayers: players,
            filteredPlayers: [],
            currentPage: 1,
            itemsPerPage: 24,
            totalPages: 1,
            filters: {
                searchTerm: '',
                star: 'all',
                club: 'ALL',
                position: []
            }
        };
        
        // Basic pre-sorting (we'll sort filtered results as needed)
        window.playerState.allPlayers.sort((a, b) => {
            // Sort by value in descending order
            if (a.value !== b.value) {
                return b.value - a.value; // Descending order
            }
            
            // If values are the same, sort alphabetically by name
            return a.name.toLowerCase().localeCompare(b.name.toLowerCase());
        });
        
        // Apply initial filters and pagination
        applyFiltersAndDisplay();
        
        // Hide the loading screen after a short delay to ensure smooth transition
        setTimeout(function() {
            if (loadingElement) {
                loadingElement.style.opacity = '0';
                setTimeout(function() {
                    if (loadingElement) {
                        loadingElement.style.display = 'none';
                    }
                }, 500);
            }
        }, 1000);
        
    } catch (error) {
        console.error('Error loading player data:', error);
        const subtextElement = document.getElementById('subtext');
        if (subtextElement) {
            subtextElement.textContent = 'Error loading data. Please try again.';
        }
    }
}

// Apply filters and display the current page
function applyFiltersAndDisplay() {
    const state = window.playerState;
    
    // Apply filters
    state.filteredPlayers = state.allPlayers.filter(player => {
        // Search filter
        const nameMatch = !state.filters.searchTerm || 
            normalizeText(player.name).includes(normalizeText(state.filters.searchTerm));
        
        // Star rating filter
        const starMatch = state.filters.star === 'all' || 
            player.star === state.filters.star;
        
        // Club filter
        const clubMatch = state.filters.club === 'ALL' || 
            player.club === state.filters.club;
        
        // Position filter
        const positionMatch = state.filters.position.length === 0 || 
            state.filters.position.includes(player.position.toLowerCase());
        
        return nameMatch && starMatch && clubMatch && positionMatch;
    });
    
    // Calculate total pages
    state.totalPages = Math.ceil(state.filteredPlayers.length / state.itemsPerPage);
    
    // Ensure current page is valid
    if (state.currentPage > state.totalPages) {
        state.currentPage = Math.max(1, state.totalPages);
    }
    
    // Display the current page
    displayCurrentPage();
    
    // Update pagination info
    updatePaginationInfo();
}

// Display current page of players
function displayCurrentPage() {
    const state = window.playerState;
    const container = document.querySelector('.player-cards');
    
    // Clear container
    container.innerHTML = '';
    
    // Calculate start and end indices
    const startIndex = (state.currentPage - 1) * state.itemsPerPage;
    const endIndex = Math.min(startIndex + state.itemsPerPage, state.filteredPlayers.length);
    
    // Only load players for current page
    const fragment = document.createDocumentFragment();
    for (let i = startIndex; i < endIndex; i++) {
        const player = state.filteredPlayers[i];
        const playerCard = createPlayerCard(player);
        fragment.appendChild(playerCard);
    }
    
    // Append all at once
    container.appendChild(fragment);
}

// Create a player card element from player data
function createPlayerCard(player) {
    const playerCard = document.createElement('div');
    playerCard.className = 'player-card';
    
    // Set data attributes
    playerCard.setAttribute('data-name', player.name);
    playerCard.setAttribute('data-star', player.star);
    playerCard.setAttribute('data-level', player.level);
    playerCard.setAttribute('data-club', player.club);
    playerCard.setAttribute('data-position', player.position);
    playerCard.setAttribute('data-value', player.value);
    playerCard.setAttribute('data-games-played', player.gamesPlayed);
    playerCard.setAttribute('data-stats', JSON.stringify(player.stats));
    
    // Create the image element
    const img = document.createElement('img');
    
    // Fix for FREE AGENT images - use a fallback path if the image doesn't exist
    if (player.club === "FREE AGENT") {
        // Use a more generic path that doesn't include FREEAGENT.webp
        img.onerror = function() {
            // If the image fails to load, try a fallback path based on the player's star rating
            if (player.star.includes('5-star-legend')) {
                this.src = "/assets/images/players/5 STAR LEGEND CARDS/default.webp";
            } else if (player.star.includes('4-star-legend')) {
                this.src = "/assets/images/players/4 STAR LEGEND CARDS/default.webp";
            } else if (player.star.includes('5-star-standard')) {
                this.src = "/assets/images/players/5 STAR CARDS/default.webp";
            } else {
                this.src = "/assets/images/players/default.webp";
            }
        };
    }
    
    img.src = player.imagePath;
    img.alt = player.name;
    img.loading = 'lazy'; // Lazy load images
    
    // Append the image to the card
    playerCard.appendChild(img);
    
    return playerCard;
}

// Helper function to normalize text for searching
function normalizeText(text) {
    // Normalize the text to NFD (Normalization Form Decomposition) and remove diacritics
    return text.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
}

// Custom order for positions
const positionOrder = ['gk', 'cb', 'lb', 'rb', 'dm', 'cm', 'am', 'lw', 'rw', 'st'];

function sortPlayers() {
    const playersContainer = document.querySelector('.player-cards');
    const players = Array.from(playersContainer.children);

    players.sort((a, b) => {
        // Sort by value in descending order
        const valueA = parseInt(a.getAttribute('data-value'), 10);
        const valueB = parseInt(b.getAttribute('data-value'), 10);
        
        if (valueA !== valueB) {
            return valueB - valueA; // Descending order
        }

        // If values are the same, sort alphabetically by name
        const nameA = a.getAttribute('data-name').toLowerCase();
        const nameB = b.getAttribute('data-name').toLowerCase();
        return nameA.localeCompare(nameB);
    });

    // Re-append sorted players to the container
    players.forEach(player => playersContainer.appendChild(player));
}

// Function to hide the filter button
function hideFilterButton() {
    document.querySelector('.filter-btn').style.display = 'none';
}

// Function to show the filter button
function showFilterButton() {
    document.querySelector('.filter-btn').style.display = 'block';
}

// Open the filter modal and hide the filter button
function openFilterModal() {
    document.getElementById('filterModal').style.display = 'block';
    hideFilterButton();  // Hide filter button when modal is opened
}

// Close the filter modal and show the filter button
function closeFilterModal() {
    document.getElementById('filterModal').style.display = 'none';
    showFilterButton();  // Show filter button when modal is closed
}

// Open the player modal and hide the filter button
function openModal(card) {
    const name = card.getAttribute('data-name');
    const photoSrc = card.querySelector('img').src;
    const club = card.getAttribute('data-club');
    const level = card.getAttribute('data-level');
    const position = card.getAttribute('data-position');
    const value = card.getAttribute('data-value');
    
    // Parse stats from the JSON-like data-stats attribute
    const stats = JSON.parse(card.getAttribute('data-stats'));

    // Set modal content for basic info
    document.getElementById('modalPlayerName').textContent = name;
    document.getElementById('modalPlayerPhoto').src = photoSrc;
    document.getElementById('modalPlayerClub').textContent = club;
    document.getElementById('modalPlayerLevel').textContent = level;
    document.getElementById('modalPlayerPosition').textContent = position;
    document.getElementById('modalPlayerValue').textContent = value;    

    // Clear the previous table rows
    const tableBody = document.getElementById('modalPlayerDetails');
    tableBody.innerHTML = '';

    // Sort stats by value in descending order (higher to lower)
    stats.sort((a, b) => {
        return b.value - a.value; // Sort by value in descending order
    });

    // Populate the playerStatsTable with the player's individual stats
    stats.forEach((stat, index) => {
        const row = document.createElement('tr');
        
        // Calculate value trend - now comparing to next value in sorted array
        // For the last item or if there's only one stat, valueTrend will be 0
        const valueTrend = index < stats.length - 1 
            ? stat.value - stats[index + 1].value 
            : 0;
        
        const trendIcon = valueTrend > 0 
            ? '<span class="trend-up"><i class="fas fa-arrow-up"></i></span>' 
            : valueTrend < 0 
                ? '<span class="trend-down"><i class="fas fa-arrow-down"></i></span>' 
                : '';

        row.innerHTML = `
            <td><span class="season-badge">${stat.season}</span></td>
            <td>${stat.team}</td>
            <td>
                <div class="value-cell">
                    ${stat.value} RC
                    <span class="value-trend">${trendIcon}</span>
                </div>
            </td>
        `;
        tableBody.appendChild(row);
    });

    // Show the modal
    const modal = document.getElementById('playerModal');
    modal.style.display = "block";
    hideFilterButton();
}

// Close the player modal and show the filter button
function closeModal() {
    const modal = document.getElementById('playerModal');
    modal.style.display = "none";
    showFilterButton();  // Show filter button when player modal is closed
}

// Modal filter functions
function resetModalFilters() {
    document.querySelector('#modalStarDropdown .selected-option').innerHTML = "All";
    document.querySelector('#modalStarDropdown .selected-option').setAttribute('data-value', "all");
    document.querySelector('#modalClubDropdown .selected-option').innerHTML = "All";
    document.querySelector('#modalClubDropdown .selected-option').setAttribute('data-value', "ALL");
    
    window.modalSelectedPositions = [];
    document.querySelectorAll('#filterModal .search-positions a').forEach(button => {
        button.classList.remove('selected');
    });
    
    closeFilterModal();
    resetFilters();
}

function applyModalFilters() {
    const modalStar = document.querySelector('#modalStarDropdown .selected-option').getAttribute('data-value');
    const modalClub = document.querySelector('#modalClubDropdown .selected-option').getAttribute('data-value');
    
    document.querySelector('#starDropdown .selected-option').innerHTML = document.querySelector('#modalStarDropdown .selected-option').innerHTML;
    document.querySelector('#starDropdown .selected-option').setAttribute('data-value', modalStar);
    document.querySelector('#clubDropdown .selected-option').innerHTML = document.querySelector('#modalClubDropdown .selected-option').innerHTML;
    document.querySelector('#clubDropdown .selected-option').setAttribute('data-value', modalClub);
    
    window.selectedPositions = [...window.modalSelectedPositions];
    
    document.querySelectorAll('.search-positions a').forEach(button => {
        const position = button.getAttribute('data-btn-var');
        if (window.selectedPositions.includes(position)) {
            button.classList.add('selected');
        } else {
            button.classList.remove('selected');
        }
    });
    
    closeFilterModal();
    filterPlayers();
}

// Update pagination info
function updatePaginationInfo() {
    const state = window.playerState;
    const pageInfo = document.getElementById('page-info');
    
    if (state.totalPages > 0) {
        pageInfo.textContent = `Page ${state.currentPage} of ${state.totalPages}`;
    } else {
        pageInfo.textContent = 'No results';
    }
    
    // Update button states
    document.querySelector('.prev-button').disabled = state.currentPage <= 1;
    document.querySelector('.next-button').disabled = state.currentPage >= state.totalPages;
}

// Navigation functions
function prevPage() {
    if (window.playerState.currentPage > 1) {
        window.playerState.currentPage--;
        displayCurrentPage();
        updatePaginationInfo();
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
}

function nextPage() {
    if (window.playerState.currentPage < window.playerState.totalPages) {
        window.playerState.currentPage++;
        displayCurrentPage();
        updatePaginationInfo();
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
}

// Initialize event listeners
document.addEventListener('DOMContentLoaded', function() {
    // Prevent right-clicking (optional)
    document.addEventListener('contextmenu', function(event) {
        event.preventDefault();
    });
    
    // Prevent text selection (optional)
    document.addEventListener('selectstart', function(event) {
        event.preventDefault();
    });
    
    // Set up search bar
    const searchBar = document.getElementById('search-bar');
    searchBar.addEventListener('input', function() {
        window.playerState.filters.searchTerm = this.value.toLowerCase();
        window.playerState.currentPage = 1; // Reset to first page on search
        applyFiltersAndDisplay();
    });

    // Set up search clear button
    const searchClear = document.getElementById('search-clear');
    const searchInput = document.getElementById('search-bar');
    
    // Show/hide clear button based on input content
    searchInput.addEventListener('input', function() {
        if (this.value.length > 0) {
            searchClear.classList.add('visible');
        } else {
            searchClear.classList.remove('visible');
        }
    });
    
    // Clear search input when button is clicked
    searchClear.addEventListener('click', function() {
        searchInput.value = '';
        searchInput.focus();
        searchClear.classList.remove('visible');
        // Trigger the input event to update results
        const inputEvent = new Event('input', { bubbles: true });
        searchInput.dispatchEvent(inputEvent);
    });
    
    // Set up position filters
    document.querySelectorAll('.search-positions a').forEach(button => {
        button.addEventListener('click', function() {
            const position = this.getAttribute('data-btn-var');
            
            // Toggle selection
            if (window.selectedPositions.includes(position)) {
                window.selectedPositions = window.selectedPositions.filter(pos => pos !== position);
                this.classList.remove('selected');
            } else {
                window.selectedPositions.push(position);
                this.classList.add('selected');
            }
            
            // Store the selection but don't apply filters immediately
            // The filters will be applied when the Apply button is clicked
        });
    });
    
    // Set up dropdown filters
    function setupDropdown(dropdownId) {
        const customDropdown = document.getElementById(dropdownId);
        if (!customDropdown) return;
        
        const selectedOption = customDropdown.querySelector('.selected-option');
        const dropdownOptions = customDropdown.querySelector('.dropdown-options');
        
        // Toggle the dropdown display
        selectedOption.addEventListener('click', () => {
            dropdownOptions.style.display = dropdownOptions.style.display === 'block' ? 'none' : 'block';
        });
        
        // Use event delegation for the dropdown options
        dropdownOptions.addEventListener('click', (event) => {
            const item = event.target.closest('.dropdown-item');
            if (item) {
                selectedOption.innerHTML = item.innerHTML;
                selectedOption.setAttribute('data-value', item.getAttribute('data-value'));
                dropdownOptions.style.display = 'none';
                
                // Don't apply filters immediately
                // Just store the selections and wait for Apply button
            }
        });
        
        // Close the dropdown if clicked outside
        document.addEventListener('click', (event) => {
            if (!customDropdown.contains(event.target)) {
                dropdownOptions.style.display = 'none';
            }
        });
    }
    
    // Initialize dropdowns
    setupDropdown('starDropdown');
    setupDropdown('clubDropdown');
    setupDropdown('modalStarDropdown');
    setupDropdown('modalClubDropdown');
    
    // Set up filter buttons
    document.querySelector('.apply-button').addEventListener('click', filterPlayers);
    document.querySelector('.reset-button').addEventListener('click', resetFilters);
    
    // Set up pagination buttons (ONLY INITIALIZE ONCE)
    document.querySelector('.prev-button').addEventListener('click', prevPage);
    document.querySelector('.next-button').addEventListener('click', nextPage);
    
    // Initialize player cards with click events
    document.addEventListener('click', function(e) {
        const playerCard = e.target.closest('.player-card');
        if (playerCard) {
            openModal(playerCard);
        }
    });
    
    // Set up modal position filters
    document.querySelectorAll('#filterModal .search-positions a').forEach(button => {
        button.addEventListener('click', function() {
            const position = this.getAttribute('data-btn-var');
            
            // Toggle selection
            if (window.modalSelectedPositions.includes(position)) {
                window.modalSelectedPositions = window.modalSelectedPositions.filter(pos => pos !== position);
                this.classList.remove('selected');
            } else {
                window.modalSelectedPositions.push(position);
                this.classList.add('selected');
            }
            
            // Store the selection but don't apply filters immediately
            // The filters will be applied when the Apply Modal Filters button is clicked
        });
    });
    
    // Start loading the data
    fetchPlayersData();
});

// Filter functions
function filterPlayers() {
    const state = window.playerState;
    
    // Get filter values from UI
    state.filters.searchTerm = document.getElementById('search-bar').value.toLowerCase();
    state.filters.star = document.querySelector('#starDropdown .selected-option').getAttribute('data-value');
    state.filters.club = document.querySelector('#clubDropdown .selected-option').getAttribute('data-value');
    state.filters.position = window.selectedPositions; // Use global variable
    
    // Reset to first page
    state.currentPage = 1;
    
    // Apply filters and update display
    applyFiltersAndDisplay();
    
    // Scroll to top
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}

// Reset filters
function resetFilters() {
    // Clear search term
    document.getElementById('search-bar').value = "";
    
    // Reset dropdowns
    document.querySelector('#starDropdown .selected-option').innerHTML = "All";
    document.querySelector('#starDropdown .selected-option').setAttribute('data-value', "all");
    document.querySelector('#clubDropdown .selected-option').innerHTML = "All";
    document.querySelector('#clubDropdown .selected-option').setAttribute('data-value', "ALL");
    
    // Reset position buttons
    window.selectedPositions = [];
    document.querySelectorAll('.search-positions a').forEach(button => {
        button.classList.remove('selected');
    });
    
    // Update state
    const state = window.playerState;
    state.filters.searchTerm = '';
    state.filters.star = 'all';
    state.filters.club = 'ALL';
    state.filters.position = [];
    state.currentPage = 1;
    
    // Apply filters
    applyFiltersAndDisplay();
}

    </script>

    <!-- Remove all non-existent JS files -->
    <!-- Performance optimization JS -->
    <script>
        // Immediately executed critical JS
        // Performance optimizations are now handled in separate files
        // This avoids duplicate event listeners that were causing issues
    </script>
    <!-- Defer main script to improve initial load -->
    <script defer src="js/script.js"></script>
</body>
</html>

